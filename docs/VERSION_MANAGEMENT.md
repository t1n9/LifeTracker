# LifeTracker ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ

## ğŸ“‹ æ¦‚è¿°

LifeTracker ä½¿ç”¨ç»Ÿä¸€çš„ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼Œç¡®ä¿å‰ç«¯ã€åç«¯å’Œæ•´ä¸ªé¡¹ç›®çš„ç‰ˆæœ¬å·ä¿æŒä¸€è‡´ã€‚

## ğŸ—‚ï¸ æ–‡ä»¶ç»“æ„

```
LifeTracker/
â”œâ”€â”€ version.json                           # ä¸»ç‰ˆæœ¬é…ç½®æ–‡ä»¶
â”œâ”€â”€ scripts/version-manager.js             # ç‰ˆæœ¬ç®¡ç†è„šæœ¬
â”œâ”€â”€ package.json                          # æ ¹é¡¹ç›®ç‰ˆæœ¬
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ package.json                      # å‰ç«¯ç‰ˆæœ¬
â”‚   â””â”€â”€ src/lib/version.ts                # å‰ç«¯ç‰ˆæœ¬å¸¸é‡ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â””â”€â”€ backend/
    â”œâ”€â”€ package.json                      # åç«¯ç‰ˆæœ¬
    â”œâ”€â”€ src/common/version.ts             # åç«¯ç‰ˆæœ¬å¸¸é‡ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
    â””â”€â”€ src/version/                      # ç‰ˆæœ¬APIæ¨¡å—
        â”œâ”€â”€ version.controller.ts
        â””â”€â”€ version.module.ts
```

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ä¿¡æ¯
```bash
npm run version:info
```

### åŒæ­¥ç‰ˆæœ¬å·åˆ°æ‰€æœ‰æ–‡ä»¶
```bash
npm run version:sync
```

### å‡çº§ç‰ˆæœ¬å·
```bash
# å‡çº§è¡¥ä¸ç‰ˆæœ¬ (2.1.0 -> 2.1.1)
npm run version:bump:patch

# å‡çº§æ¬¡ç‰ˆæœ¬ (2.1.0 -> 2.2.0)
npm run version:bump:minor

# å‡çº§ä¸»ç‰ˆæœ¬ (2.1.0 -> 3.0.0)
npm run version:bump:major

# é»˜è®¤å‡çº§è¡¥ä¸ç‰ˆæœ¬
npm run version:bump
```

## ğŸ“ ç‰ˆæœ¬é…ç½®æ–‡ä»¶ (version.json)

```json
{
  "version": "2.1.0",
  "name": "LifeTracker",
  "description": "ç”Ÿæ´»è®°å½•ç³»ç»Ÿ",
  "buildDate": "2024-08-15",
  "features": [
    "ä»»åŠ¡ç®¡ç†",
    "å­¦ä¹ è®°å½•",
    "ç•ªèŒ„é’Ÿè®¡æ—¶",
    "è¿åŠ¨è®°å½•", 
    "æ¶ˆè´¹è®°å½•",
    "æ•°æ®ç»Ÿè®¡",
    "æ¦‚è§ˆåˆ†äº«",
    "ç”¨æˆ·ç®¡ç†"
  ],
  "changelog": {
    "2.1.0": {
      "date": "2024-08-15",
      "changes": [
        "æ–°å¢åˆ†äº«åŠŸèƒ½",
        "ä¼˜åŒ–ç”¨æˆ·ç•Œé¢",
        "ä¿®å¤å·²çŸ¥é—®é¢˜",
        "è´¦æˆ·ç®¡ç†é¡µé¢é‡æ„"
      ]
    }
  }
}
```

## ğŸš€ API æ¥å£

### è·å–ç‰ˆæœ¬ä¿¡æ¯
```
GET /api/version
```

å“åº”ï¼š
```json
{
  "version": "2.1.0",
  "name": "LifeTracker",
  "description": "ç”Ÿæ´»è®°å½•ç³»ç»Ÿ",
  "buildDate": "2024-08-15",
  "features": ["ä»»åŠ¡ç®¡ç†", "å­¦ä¹ è®°å½•", ...],
  "versionString": "v2.1.0",
  "fullInfo": "LifeTracker v2.1.0 (2024-08-15)"
}
```

### è·å–ç®€å•ç‰ˆæœ¬å·
```
GET /api/version/simple
```

å“åº”ï¼š
```json
{
  "version": "2.1.0",
  "versionString": "v2.1.0"
}
```

## ğŸ’» å‰ç«¯ä½¿ç”¨

```typescript
import { VERSION_INFO, getVersionString, getFullVersionInfo } from '@/lib/version';

// è·å–ç‰ˆæœ¬å·
const version = VERSION_INFO.version; // "2.1.0"

// è·å–ç‰ˆæœ¬å­—ç¬¦ä¸²
const versionString = getVersionString(); // "v2.1.0"

// è·å–å®Œæ•´ç‰ˆæœ¬ä¿¡æ¯
const fullInfo = getFullVersionInfo(); // "LifeTracker v2.1.0 (2024-08-15)"
```

## ğŸ”„ å·¥ä½œæµç¨‹

### å¼€å‘è¿‡ç¨‹ä¸­
1. ä¿®æ”¹ `version.json` ä¸­çš„ç‰ˆæœ¬å·å’Œæ›´æ–°æ—¥å¿—
2. è¿è¡Œ `npm run version:sync` åŒæ­¥åˆ°æ‰€æœ‰æ–‡ä»¶
3. æäº¤ä»£ç 

### å‘å¸ƒæ–°ç‰ˆæœ¬
1. è¿è¡Œ `npm run version:bump:minor` å‡çº§ç‰ˆæœ¬
2. æ›´æ–° `version.json` ä¸­çš„ changelog
3. è¿è¡Œ `npm run version:sync` ç¡®ä¿åŒæ­¥
4. æäº¤å¹¶æ‰“æ ‡ç­¾
5. éƒ¨ç½²

## ğŸ“‹ ç‰ˆæœ¬è§„èŒƒ

éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/) è§„èŒƒï¼š

- **ä¸»ç‰ˆæœ¬å· (MAJOR)**ï¼šä¸å…¼å®¹çš„ API ä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å· (MINOR)**ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢å· (PATCH)**ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

### ç¤ºä¾‹
- `2.0.0` â†’ `2.0.1`ï¼šä¿®å¤ bug
- `2.0.1` â†’ `2.1.0`ï¼šæ–°å¢åŠŸèƒ½
- `2.1.0` â†’ `3.0.0`ï¼šé‡å¤§æ›´æ–°ï¼Œå¯èƒ½ä¸å…¼å®¹

## ğŸ” è‡ªåŠ¨åŒ–

ç‰ˆæœ¬ç®¡ç†è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. æ›´æ–°æ‰€æœ‰ `package.json` æ–‡ä»¶çš„ç‰ˆæœ¬å·
2. ç”Ÿæˆå‰ç«¯å’Œåç«¯çš„ç‰ˆæœ¬å¸¸é‡æ–‡ä»¶
3. æ›´æ–°æ„å»ºæ—¥æœŸ
4. ä¿æŒæ‰€æœ‰æ–‡ä»¶çš„ç‰ˆæœ¬ä¸€è‡´æ€§

## ğŸ“š æœ€ä½³å®è·µ

1. **å®šæœŸåŒæ­¥**ï¼šä¿®æ”¹ç‰ˆæœ¬åç«‹å³è¿è¡Œ `npm run version:sync`
2. **è®°å½•å˜æ›´**ï¼šåœ¨ `version.json` çš„ changelog ä¸­è¯¦ç»†è®°å½•æ¯ä¸ªç‰ˆæœ¬çš„å˜æ›´
3. **æ ‡ç­¾ç®¡ç†**ï¼šå‘å¸ƒæ—¶åˆ›å»º Git æ ‡ç­¾ `git tag v2.1.0`
4. **è‡ªåŠ¨åŒ–é›†æˆ**ï¼šåœ¨ CI/CD ä¸­é›†æˆç‰ˆæœ¬æ£€æŸ¥å’ŒåŒæ­¥
